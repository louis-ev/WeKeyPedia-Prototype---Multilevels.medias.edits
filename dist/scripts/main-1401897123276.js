(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function hyphenate(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function getSelectedText(){var e="";return"undefined"!=typeof window.getSelection?e=window.getSelection().toString():"undefined"!=typeof document.selection&&"Text"==document.selection.type&&(e=document.selection.createRange().text),e}function doSomethingWithSelectedText(){var e=getSelectedText();e&&console.log("Got selected text "+e)}function modeApercu(){$("body").addClass("apercu"),$(".container").css("width","100vw"),$(".colonne").each(function(){if(""!==$(this).data("col")){$that=$(this),$colonnes=$that.find(".col3"),console.log("$that.data('col')"+$that.data("col"));var e=$colonnes.filter(function(){return console.log("$(this).data('gotoniveau')"+$(this).data("gotoniveau")),$(this).data("gotoniveau").match($that.data("col"))});$colonnes.addClass("collapsed"),e.removeClass("collapsed")}})}function modeColonne(e){$("body").removeClass("apercu"),$(".col3").removeClass("collapsed"),$(".container").css("width","290vw"),setTimeout(function(){movecol(e)},1400)}function reconstructCommentaires(e){console.log("commentData.length : "+e.length);for(var o=0;o<e.length;o++){var t=e[o];console.log("comments",t);var n=t.id,a=t.nom.toString(),i=t.texte.toString(),c=t.position[0].diff,l=t.position[0].para,s=$(".colonne[data-col="+c+"]").find('.bloctext[data-para="'+l+'"] .comments'),r='<div class="commentaire" data-id="'+n+'" data-auteur="'+a+'"><div class="auteur">'+a+'</div><div class="texte">'+i+"</div></div>";console.log("%c constructionCommentaire : "+r,"background: #eee; color: #09606F"),console.log("commentField : ",s),0===s.find(".commentaire[data-id="+t.id+"]").length&&s.find(".submit").before(r)}}function newComment(e,o){var t=e.length,n=o.parents(".colonne").data("col"),a=o.parents(".bloctext").data("para"),i=o.siblings().closest(".nom").val(),c=o.siblings().closest(".texte").val();e[e.length]={id:t,nom:i,texte:c,position:[{diff:n,para:a}]},updateJSON(e,originJson)}function popupPrompt(e,o){var t=prompt(e,"");return""!=t&&null!=t?t:o}function updateJSON(e,o){console.log("updateJSON"),console.log(o),console.log(e),setTimeout(function(){$.ajax({url:"update.php",type:"POST",data:{path:o,data:e},timeout:2e3,success:function(o){console.log(o),reconstructCommentaires(e)},error:function(e){console.log("error : "+e),console.log(e)}})},200)}var niveau=0,toc=$(".rubrique .col3");$.extend($.easing,{def:"easeOutQuad",easeInOutQuint:function(e,o,t,n,a){return(o/=a/2)<1?n/2*o*o*o*o*o+t:n/2*((o-=2)*o*o*o*o+2)+t}});var waitForFinalEvent=function(){var e={};return function(o,t,n){n||(n="Don't call this twice without a uniqueId"),e[n]&&clearTimeout(e[n]),e[n]=setTimeout(o,t)}}(),movecol=function(e){{var o=$(".colonne[data-col="+e+"]"),t=o.position().left+$(".colonne[data-col="+e+"]").width()/2,n=$("#masque").scrollLeft()+t-$(window).width()/2;t-$(window).width()/2}$("#masque .container").transition({x:-n,duration:800,easing:"snap"}),$(".colonne").addClass("peripherie"),$(".colonne[data-col="+e+"]").removeClass("peripherie"),$("body").removeClass("niveau0 niveau1 niveau2"),$("body").addClass(e)},checkniveau=function(e){return e=0>e?0:e,e=e>2?2:e};$(document).ready(function(){$("#toolbar").css("opacity",1),$(".container").css("opacity",1),modeApercu();var e=function(e){$("#masque").animate({scrollTop:$("#masque").scrollTop()+e.offset().top-80},{duration:800,queue:!1})};$(".colonne").each(function(){var e=0;$(this).find("p, h4").each(function(){e+=1,$(this).wrap('<div class="bloctext" data-para="'+e+'"></div>')})}),$('<div class="border border-left"></div><div class="border border-right"></div>').insertAfter(".colonne p, .colonne h4"),$("#titrearticle").append('<div class="gene"><img src="images/genealogy.svg" alt="glyphicons_008_film" width="" height="" /></div>'),$('<div class="comments"><div class="submit"><textarea class="nom"></textarea><textarea class="texte"></textarea><button class="send"></button></div></div>').insertAfter(".colonne p, .colonne h4");var o=0;$(".colonne.simple h2").each(function(){var e="simple"+o++;$(this).attr("id",e),$(".rubrique .simple ol").append('<li><h5 data-goto="'+e+'">'+$(this).text()+"</h5></li>")}),o=0,$(".colonne.moyen h2").each(function(){var e="moyen"+o++;$(this).attr("id",e),$(".rubrique .moyen ol").append('<li><h5 data-goto="'+e+'">'+$(this).text()+"</h5></li>")}),o=0,$(".colonne.complex h2").each(function(){var e="complex"+o++;$(this).attr("id",e),$(".rubrique .complex ol").append('<li><h5 data-goto="'+e+'">'+$(this).text()+"</h5></li>")}),$("#masque").bind("scroll",function(){var e=$("#masque").scrollTop();80>e?$("#toolbar").removeClass("far"):$("#toolbar").addClass("far")}),window.originJson="comments.json",$.getJSON(originJson,function(e){console.log("data : "+e),console.table(e),window.commentData=e,reconstructCommentaires(commentData)}),$(window).resize(function(){waitForFinalEvent(function(){setTimeout(function(){movecol(niveau)},1400)},500,"resize")}),document.onmouseup=doSomethingWithSelectedText,document.onkeyup=doSomethingWithSelectedText,$("body").click(function(o){var t=$(o.target);if(console.log(t),$("body").hasClass("apercu")){var n=t.closest(".colonne").data("col");console.log("getCol : "+n),modeColonne(n)}else t.is("#bloclogo h2")?(console.log("plop"),modeColonne("niveau0")):t.is(".col3>h5")?(console.log(".col3>h5"),movecol(t.closest(".col3").data("gotoniveau"))):t.is($(".rubrique ol h5"))?(console.log(".rubrique ol h5"),$("body").hasClass("apercu")||movecol(t.closest(".col3").data("gotoniveau")),e($(".colonne h2[id="+t.data("goto")+"]"))):t.is($(".border-right"))?(niveau+=1,movecol("niveau"+checkniveau(niveau)),e($("h2[data-topic=development"+checkniveau(niveau)+"]"))):t.is($(".border-left"))?(niveau-=1,movecol("niveau"+checkniveau(niveau)),e($("h2[data-topic=development"+checkniveau(niveau)+"]"))):t.is($(".send"))&&(console.log("plop"),newComment(commentData,t))})});
},{}]},{},[1])